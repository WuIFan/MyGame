<!doctype html>	
<html>
	<head>
		<meta charset="utf-8">
		<title>敲好玩</title>
		<style type="text/css">
			#MyCanvas{
				border: 1px solid black;
				position: absolute;
				left: 300px;
				top: 150px;				
			}
		</style>
	</head>
	<body>
		<canvas id="MyCanvas" width="800" height="500"></canvas>
		<script>
			var c=document.getElementById("MyCanvas");
			var ctx=c.getContext("2d"); //2D繪圖

			//設定外牆
			var wallX=2.5;
			var wallY=2.5;
			var wallBorder=5;
			var wallColor="#3A006F";

			var wallWidth=c.width-wallBorder;
			var wallHeight=c.height-wallBorder;

			//畫出外牆
			function drawWall(){
				ctx.strokeStyle=wallColor;
				ctx.lineWidth=wallBorder;
				ctx.strokeRect(wallX,wallY,wallWidth,wallHeight);
			}

			//邊界
			var topBound = wallY + wallBorder/2;
     		var bottomBound = wallY + wallHeight - wallBorder/2;
      		var leftBound = wallX + wallBorder/2; 
      		var rightBound = wallX + wallWidth - wallBorder/2;

      		var unit=10 //移動的單位

			 // 偵測鍵盤事件
     		

     		var player=new Image();
     		var PlayerStartX=50;
     		var PlayerStartY=372;
     		var PlayerLeftBound=leftBound;
     		var PlayerRightBound=rightBound-wallBorder-100;
     		var PlayerStartXOld=50;
     		var PlayerStartYOld=372;
     		player.src="player.jpg";

     		function drawPlayer(){
     			//player.onload=function(){
     				//alert(PlayerStartX);
     				ctx.fillStyle="#FFFFFF";
     				ctx.fillRect(PlayerStartXOld,PlayerStartYOld,55,55); 				
     				ctx.drawImage(player,PlayerStartX,PlayerStartY);
     				//ctx.drawImage(player,10,10);
     			//}
     		}
     		
     		function movePlayer(unit){        		
       			PlayerStartXOld=PlayerStartX;
        		PlayerStartX += unit;
       			if(PlayerStartX < PlayerLeftBound) {
          			PlayerStartX = PlayerLeftBound;
       			}
       			else if(PlayerStartX > PlayerRightBound){
         			 PlayerStartX = PlayerRightBound;
       			}
       			//ctx.drawImage(player,PlayerStartX,PlayerStartY);
       			//alert(PlayerStartX);
       			drawPlayer();
      		}
			window.onkeydown = function(event){
        		switch(event.keyCode){
          			case 37:  // 向左
            			movePlayer(-unit);
           				break;
          			case 39:  // 向右
            			movePlayer(unit);
            			//alert("right");
            			break;
        		}
     		};


			drawPlayer();
			drawWall();
		</script>
		<!-- <img src="player.jpg"> -->
	</body>
</html>
